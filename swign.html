<html lang="en">
<head>
<title>Untitled</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Untitled">
<meta name="generator" content="makeinfo 4.8">
<link title="Top" rel="top" href="#Top">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
\. 
<!-- TROFF INPUT: .fl			\" force out current output buffer -->
<!-- .fl			\" force out current output buffer -->
\\!%PB
\\!/showpage{}def
<!-- TROFF INPUT: ...\" the following is from Ken Flowers - it prevents dictionary overflows -->
<!-- ...\" the following is from Ken Flowers - it prevents dictionary overflows -->
\\!/tempdict 200 dict def tempdict begin
<!-- TROFF INPUT: .fl			\" prolog -->
<!-- .fl			\" prolog -->
<!-- TROFF INPUT: .sy cat \\$1\" bring in postscript file -->
<!-- .sy cat \\$1\" bring in postscript file -->
<!-- TROFF INPUT: ...\" the following line matches the tempdict above -->
<!-- ...\" the following line matches the tempdict above -->
\\!end % tempdict %
\\!PE
\\!. 
<!-- TROFF INPUT: .sp \\$2u	\" move below the image -->
<!-- .sp \\$2u	\" move below the image -->
<!-- TROFF INPUT: .. -->
<!-- .. -->
<!-- TROFF INPUT: .de pF -->
<!-- .de pF -->
<!-- TROFF INPUT: .ie     \\*(f1 .ds f1 \\n(.f -->
<!-- .ie     \\*(f1 .ds f1 \\n(.f -->
<!-- TROFF INPUT: .el .ie \\*(f2 .ds f2 \\n(.f -->
<!-- .el .ie \\*(f2 .ds f2 \\n(.f -->
<!-- TROFF INPUT: .el .ie \\*(f3 .ds f3 \\n(.f -->
<!-- .el .ie \\*(f3 .ds f3 \\n(.f -->
<!-- TROFF INPUT: .el .ie \\*(f4 .ds f4 \\n(.f -->
<!-- .el .ie \\*(f4 .ds f4 \\n(.f -->
<!-- TROFF INPUT: .el .tm ? font overflow -->
<!-- .el .tm ? font overflow -->
<!-- TROFF INPUT: .ft \\$1 -->
<!-- .ft \\$1 -->
<!-- TROFF INPUT: .. -->
<!-- .. -->
<!-- TROFF INPUT: .de fP -->
<!-- .de fP -->
<!-- TROFF INPUT: .ie     !\\*(f4 \{\ -->
<!-- .ie     !\\*(f4 \@{\ -->
<!-- TROFF INPUT: .	ft \\*(f4 -->
<!-- .	ft \\*(f4 -->
<!-- TROFF INPUT: .	ds f4\" -->
<!-- .	ds f4\" -->
'	br \}
<!-- TROFF INPUT: .el .ie !\\*(f3 \{\ -->
<!-- .el .ie !\\*(f3 \@{\ -->
<!-- TROFF INPUT: .	ft \\*(f3 -->
<!-- .	ft \\*(f3 -->
<!-- TROFF INPUT: .	ds f3\" -->
<!-- .	ds f3\" -->
'	br \}
<!-- TROFF INPUT: .el .ie !\\*(f2 \{\ -->
<!-- .el .ie !\\*(f2 \@{\ -->
<!-- TROFF INPUT: .	ft \\*(f2 -->
<!-- .	ft \\*(f2 -->
<!-- TROFF INPUT: .	ds f2\" -->
<!-- .	ds f2\" -->
'	br \}
<!-- TROFF INPUT: .el .ie !\\*(f1 \{\ -->
<!-- .el .ie !\\*(f1 \@{\ -->
<!-- TROFF INPUT: .	ft \\*(f1 -->
<!-- .	ft \\*(f1 -->
<!-- TROFF INPUT: .	ds f1\" -->
<!-- .	ds f1\" -->
'	br \}
<!-- TROFF INPUT: .el .tm ? font underflow -->
<!-- .el .tm ? font underflow -->
<!-- TROFF INPUT: .. -->
<!-- .. -->
<!-- TROFF INPUT: .ds f1\" -->
<!-- WARNING: man/man1/swign.1:49:%%unrecognized define-string command: [.ds f1\"] -->
<!-- TROFF INPUT: .ds f2\" -->
<!-- WARNING: man/man1/swign.1:50:%%unrecognized define-string command: [.ds f2\"] -->
<!-- TROFF INPUT: .ds f3\" -->
<!-- WARNING: man/man1/swign.1:51:%%unrecognized define-string command: [.ds f3\"] -->
<!-- TROFF INPUT: .ds f4\" -->
<!-- WARNING: man/man1/swign.1:52:%%unrecognized define-string command: [.ds f4\"] -->
<!-- TROFF INPUT: .TH "swign" "1" -->
<div class="node">
<p><hr>
<a name="Top"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#NAME">NAME</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#dir">(dir)</a>

</div>

<h2 class="chapter">1 swign" "1</h2>

<!-- TROFF INPUT: .hy 0 -->
<!-- .hy 0 -->
<!-- TROFF INPUT: .if n .na -->
<!-- .if n .na -->
<!-- TROFF INPUT: .SH "NAME" -->
<!-- DEBUG: print_menu("Top") -->
<ul class="menu">
<li><a accesskey="1" href="#NAME">NAME</a>
<li><a accesskey="2" href="#SYNOPSIS">SYNOPSIS</a>
<li><a accesskey="3" href="#DESCRIPTION">DESCRIPTION</a>
<li><a accesskey="4" href="#OPTIONS">OPTIONS</a>
<li><a accesskey="5" href="#EXTERNAL-EFFECTS">EXTERNAL EFFECTS</a>
<li><a accesskey="6" href="#EXAMPLES">EXAMPLES</a>
<li><a accesskey="7" href="#TESTING">TESTING</a>
<li><a accesskey="8" href="#PSF-ATTRIBUTE-REPLACEMENT">PSF ATTRIBUTE REPLACEMENT</a>
<li><a accesskey="9" href="#SAMPLE-SOURCE-PACKAGE-PSF">SAMPLE SOURCE PACKAGE PSF</a>
<li><a href="#ENVIRONMENT">ENVIRONMENT</a>
<li><a href="#RETURN-VALUE">RETURN VALUE</a>
<li><a href="#FILES">FILES</a>
<li><a href="#SEE-ALSO">SEE ALSO</a>
<li><a href="#IDENTIFICATION">IDENTIFICATION</a>
<li><a href="#BUGS">BUGS</a>
</ul>
<!-- MAN2TEXI: EON -->
<div class="node">
<p><hr>
<a name="NAME"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#SYNOPSIS">SYNOPSIS</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Top">Top</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h3 class="section">1.1 NAME</h3>

<p>swign <span class="roman">&mdash;</span> Create a tar archive of a directory with an embedded GPG signature. 
<!-- TROFF INPUT: .SH "SYNOPSIS" -->
<!-- DEBUG: print_menu("NAME") -->
<!-- MAN2TEXI: EON -->
<div class="node">
<p><hr>
<a name="SYNOPSIS"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#DESCRIPTION">DESCRIPTION</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#NAME">NAME</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h3 class="section">1.2 SYNOPSIS</h3>

<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .nf -->
<!--  -->
<pre class="display">     <b>swign</b> [options] [-u gpg-name] [&ndash;homedir=gpg-homedir] @- # Write to stdout
     <!-- TROFF INPUT: .fi -->
</pre>
<!--  -->
<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .nf -->
<!--  -->
<pre class="display">     <b>swign</b> [options] [-u gpg-name] [&ndash;homedir=gpg-homedir] @.  # Sign directory
     <!-- TROFF INPUT: .fi -->
</pre>
<!--  -->
<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .nf -->
<!--  -->
<pre class="display">     <b>swign</b> -S [options] [-u gpg-name] [&ndash;homedir=gpg-homedir]
     <!-- TROFF INPUT: .fi -->
</pre>
<!--  -->
<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .nf -->
<!--  -->
<pre class="display">     <b>swign</b> -E [options] [-u gpg-name] [&ndash;homedir=gpg-homedir]
     <!-- TROFF INPUT: .fi -->
</pre>
<!--  -->
<!-- TROFF INPUT: .SH "DESCRIPTION" -->
<!-- DEBUG: print_menu("SYNOPSIS") -->
<!-- MAN2TEXI: EON -->
<div class="node">
<p><hr>
<a name="DESCRIPTION"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#OPTIONS">OPTIONS</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#SYNOPSIS">SYNOPSIS</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h3 class="section">1.3 DESCRIPTION</h3>

<!-- TROFF INPUT: .PP -->
<p><b>swign</b> reads a PSF (Product Specfication File) to generate and load the package catalog into
the current directory and then writes the cooresponding archive to stdout. 
The PSF is read from standard input by default. 
To use an internally generated PSF with name and revision attributes
determined from the name of the current directory use '-s.'. 
<!-- TROFF INPUT: .PP -->
The PSF is scanned for replacement tokens for
tag and revision attributes determined from the current directoy name. 
It is expected that the current directory name have the form: 'tag-revision'. 
The replacement string has the form '%<tt>_</tt><tt>_</tt>NAME' where NAME is 'tag' or 'revision'. 
The directory derived values can be overridden with the '&ndash;revision' or '&ndash;name-version'
options. 
<!-- TROFF INPUT: .PP -->
<b>swign</b> by default will remove and re-create the ./catalog/
meta-data directory, then use GNU tar to write the current directory as a tar archive to
stdout.  The result is a tar archive written entirely with GNU tar that contains an
embedded GPG signature in the control file './catalog/dfiles/signature'. 
The contents of './catalog/' are consistent with the POSIX packaging
standard ISO/IEC 15068-2:1999.  The package layout of the resulting
archive is unchanged except for the addition of the './catalog' directory. 
<!-- TROFF INPUT: .PP -->
The contents of the archive is the contents of the current directory ".". 
The pathnames in the archive are prefixed by the base name of ".". 
The owner and group of all the files in the emitted archive are
specified by the PSF file and command line options. 
<!-- TROFF INPUT: .PP -->
In order for the signature to be valid, the file ownerships specified
in the PSF must be consistent with the 'swign' command. 
<b>swign</b> will read the PSF to determine these ownerships
automatically from the 'file<tt>_</tt>permissions' directive unless the '-o' or '-g' command
line options are used or if this feature is disabled using the '&ndash;no-psf-detect' option
is given. 
<!-- TROFF INPUT: .PP -->
The default ownerships for all the files
are the current user's owner and group. 
If the -o (or -g) option is used with a empty string for the option arg
then the file ownerships of the source files are used. 
This script assumes GNU tar is installed. 
<!-- TROFF INPUT: .PP -->
After writing the ./catalog/ file and before writing the archive, the file list stored in ./catalog/dfiles/files is compared
to the current directory contents, if any difference is found the
archive is not written and error returned. 
<!-- TROFF INPUT: .SH "OPTIONS" -->
<!-- DEBUG: print_menu("DESCRIPTION") -->
<!-- MAN2TEXI: EON -->
<div class="node">
<p><hr>
<a name="OPTIONS"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#EXTERNAL-EFFECTS">EXTERNAL EFFECTS</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#DESCRIPTION">DESCRIPTION</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h3 class="section">1.4 OPTIONS</h3>

<!-- TROFF INPUT: .PP -->
<p><b>&ndash;help</b>
<!-- TROFF INPUT: .RS -->
<!--  -->
<blockquote>
show help. 
<!-- TROFF INPUT: .RE -->
</blockquote>
<!--  -->
<!-- TROFF INPUT: .PP -->
<b>&ndash;show-psf</b>
<!-- TROFF INPUT: .RS -->
<!--  -->
<blockquote>
show the PSF to stdout, and then exit. 
<!-- TROFF INPUT: .RE -->
</blockquote>
<!--  -->
<!-- TROFF INPUT: .PP -->
<b>&ndash;no-psf-detect</b>
<!-- TROFF INPUT: .RS -->
<!--  -->
<blockquote>
Disable automatic detection of the PSF's file ownerships policy. 
<!-- TROFF INPUT: .RE -->
</blockquote>
<!--  -->
<!-- TROFF INPUT: .PP -->
<b>&ndash;no-remove</b>
<!-- TROFF INPUT: .RS -->
<!--  -->
<blockquote>
Don't remove the ./catalog directory before overwriting. 
<!-- TROFF INPUT: .RE -->
</blockquote>
<!--  -->
<!-- TROFF INPUT: .PP -->
<b>&ndash;file-ownerships</b>
<!-- TROFF INPUT: .RS -->
<!--  -->
<blockquote>
Use the file ownerships and permissions of the source files. 
<!-- TROFF INPUT: .RE -->
</blockquote>
<!--  -->
<!-- TROFF INPUT: .PP -->
<b>-u, &ndash;local-user name</b>
<!-- TROFF INPUT: .RS -->
<!--  -->
<blockquote>
Use name as the user ID to sign. 
<!-- TROFF INPUT: .RE -->
</blockquote>
<!--  -->
<!-- TROFF INPUT: .PP -->
<b>&ndash;homedir=DIR</b>
<!-- TROFF INPUT: .RS -->
<!--  -->
<blockquote>
Set the name of the home directory to DIR.  If not specified
then use "~/.gnupg". 
<!-- TROFF INPUT: .RE -->
</blockquote>
<!--  -->
<!-- TROFF INPUT: .PP -->
<b>-s, &ndash;source=FILE</b>
<!-- TROFF INPUT: .RS -->
<!--  -->
<blockquote>
Specify a PSF file name or one of two special names, '-' for stdin, and '.' for the internally
generated PSF. 
<!-- TROFF INPUT: .RE -->
</blockquote>
<!--  -->
<!-- TROFF INPUT: .PP -->
<b>-T, &ndash;show-names-only</b>
<!-- TROFF INPUT: .RS -->
<!--  -->
<blockquote>
show some info (for help and debugging) and exit. 
<!-- TROFF INPUT: .RE -->
</blockquote>
<!--  -->
<!-- TROFF INPUT: .PP -->
<b>-t, &ndash;run-sanity-check</b>
<!-- TROFF INPUT: .RS -->
<!--  -->
<blockquote>
Instead of writing stdout, write the archive to ../packageDirName.swigntest.tar.gz and run some sanity tests. 
<!-- TROFF INPUT: .RE -->
</blockquote>
<!--  -->
<!-- TROFF INPUT: .PP -->
<b>-S, &ndash;sign-only</b>
<!-- TROFF INPUT: .RS -->
<!--  -->
<blockquote>
Write the ./catalog/ file containing the digest and signature into "." and then exit without
writing the archive to stdout.   Same as using "." as the target such as 'swign @.' 
<!-- TROFF INPUT: .RE -->
</blockquote>
<!--  -->
<!-- TROFF INPUT: .PP -->
<b>-E, &ndash;emit-only</b>
<!-- TROFF INPUT: .RS -->
<!--  -->
<blockquote>
Do not write the ./catalog/ file containing the digest and signature into "." and then
write the archive to stdout.  This does not affect the directory contents. 
<!-- TROFF INPUT: .RE -->
</blockquote>
<!--  -->
<!-- TROFF INPUT: .PP -->
<b>-D, &ndash;with-checkdigest FILE</b>
<!-- TROFF INPUT: .RS -->
<!--  -->
<blockquote>
Include the checkdigest control script sourced from FILE. 
This is only needed when not supplying a PSF, that is this
option modifies an internally generated PSF. 
<!-- TROFF INPUT: .RE -->
</blockquote>
<!--  -->
<!-- TROFF INPUT: .PP -->
<b>-o, &ndash;owner OWNER</b>
<!-- TROFF INPUT: .RS -->
<!--  -->
<blockquote>
Specify owner. 
Use an empty string "" to specify the source file owner. 
<!-- TROFF INPUT: .RE -->
</blockquote>
<!--  -->
<!-- TROFF INPUT: .PP -->
<b>-g, &ndash;group GROUP</b>
<!-- TROFF INPUT: .RS -->
<!--  -->
<blockquote>
Specify group. 
Use an empty string "" to specify the source file group. 
<!-- TROFF INPUT: .RE -->
</blockquote>
<!--  -->
<!-- TROFF INPUT: .PP -->
<b>&ndash;name-version=NAME-REV</b>
<!-- TROFF INPUT: .RS -->
<!--  -->
<blockquote>
Specify a product tag and revision as dash delimited. 
<!-- TROFF INPUT: .RE -->
</blockquote>
<!--  -->
<!-- TROFF INPUT: .PP -->
<b>-r, &ndash;revision REV</b>
<!-- TROFF INPUT: .RS -->
<!--  -->
<blockquote>
Specify a product revision.  This will override a revision part
of the current directory's name. 
<!-- TROFF INPUT: .RE -->
</blockquote>
<!--  -->
<!-- TROFF INPUT: .PP -->
<b>-x format</b>
<!-- TROFF INPUT: .RS -->
<!--  -->
<blockquote>
Specify the archive format. 
Must be one of the formats of swpackage. 
<!-- TROFF INPUT: .RE -->
</blockquote>
<!--  -->
<!-- TROFF INPUT: .PP -->
<b>@-</b>
<!-- TROFF INPUT: .RS -->
<!--  -->
<blockquote>
Target, only supported target is standard output. 
<!-- TROFF INPUT: .RE -->
</blockquote>
<!--  -->
<!-- TROFF INPUT: .SH "EXTERNAL EFFECTS" -->
<!-- DEBUG: print_menu("OPTIONS") -->
<!-- MAN2TEXI: EON -->
<div class="node">
<p><hr>
<a name="EXTERNAL-EFFECTS"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#EXAMPLES">EXAMPLES</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#OPTIONS">OPTIONS</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h3 class="section">1.5 EXTERNAL EFFECTS</h3>

<!-- TROFF INPUT: .PP -->
<p>The program will remove and replace a file in "." named ./catalog/. 
<!-- TROFF INPUT: .br -->
<!-- .br -->
Nothing outside of './catalog/' is modified. 
<!-- TROFF INPUT: .br -->
<!-- .br -->
Standard output is the target for the tar archive. 
<!-- TROFF INPUT: .br -->
<!-- .br -->
When using the '-t' option an archive file is written to ../packageDirName.swigntest.tar.gz
<!-- TROFF INPUT: .br -->
<!-- .br -->
<!-- TROFF INPUT: .PP -->
A copy of the PSF is made in /var/tmp/swign$$. 
It is normally created and erased by the program. 
<!-- TROFF INPUT: .SH "EXAMPLES" -->
<!-- DEBUG: print_menu("EXTERNAL EFFECTS") -->
<!-- MAN2TEXI: EON -->
<div class="node">
<p><hr>
<a name="EXAMPLES"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#TESTING">TESTING</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#EXTERNAL-EFFECTS">EXTERNAL EFFECTS</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h3 class="section">1.6 EXAMPLES</h3>

<!-- TROFF INPUT: .PP -->
<p>Show the internally generated PSF to stdout. 
Change directory into the directory to package, then type
<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .nf -->
<!--  -->
<pre class="display">        swign -s. &ndash;show-psf
        #
        # or specify a owner and group policy
        swign -s. -o 0 -g 0 &ndash;show-psf
     <!-- TROFF INPUT: .PP -->
     <!-- TROFF INPUT: .nf -->
     <!--  -->
     <pre class="display">          <!-- TROFF INPUT: .fi -->
     </pre>
     <!--  -->
     <!-- TROFF INPUT: .PP -->
     <!-- TROFF INPUT: .fi -->
</pre>
<!--  -->
<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .PP -->
<p>Create a signed metadata (i.e. catalog/) directory of a live directory,
for example /bin
<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .nf -->
<!--  -->
<pre class="display">            swign -D $HOME/checkdigest.sh -u "YourGPGNAME" -o "" -g "" @.
     <!-- TROFF INPUT: .PP -->
     <!-- TROFF INPUT: .nf -->
     <!--  -->
     <pre class="display">          <!-- TROFF INPUT: .fi -->
     </pre>
     <!--  -->
     <!-- TROFF INPUT: .PP -->
     <!-- TROFF INPUT: .fi -->
</pre>
<!--  -->
<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .PP -->
<p>Generate the package (and verify it) using a PSF that you supply on
standard input. 
Change directory into the directory to package, then type
<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .nf -->
<!--  -->
<pre class="display">        swign -o 0 -g 0 &ndash;show-psf | swign -s - -u "gpgName" @- | swverify -d @-
     <!-- TROFF INPUT: .PP -->
     <!-- TROFF INPUT: .nf -->
     <!--  -->
     <pre class="display">          <!-- TROFF INPUT: .fi -->
     </pre>
     <!--  -->
     <!-- TROFF INPUT: .PP -->
     <!-- TROFF INPUT: .fi -->
</pre>
<!--  -->
<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .PP -->
<p>Example of directory signing and authentication. 
<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .nf -->
<!--  -->
<pre class="display">        swign -u YourGPGName -s. &ndash;file-ownerships -D /HOME/checkdigest.sh &ndash;sign-only
        swverify -d @.
        swign  &ndash;file-ownerships -emit-only | swverify -d @-
     <!-- TROFF INPUT: .PP -->
     <!-- TROFF INPUT: .nf -->
     <!--  -->
     <pre class="display">          <!-- TROFF INPUT: .fi -->
     </pre>
     <!--  -->
     <!-- TROFF INPUT: .PP -->
     <!-- TROFF INPUT: .fi -->
</pre>
<!--  -->
<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .SH "TESTING" -->
<!-- DEBUG: print_menu("EXAMPLES") -->
<!-- MAN2TEXI: EON -->
<div class="node">
<p><hr>
<a name="TESTING"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#PSF-ATTRIBUTE-REPLACEMENT">PSF ATTRIBUTE REPLACEMENT</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#EXAMPLES">EXAMPLES</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h3 class="section">1.7 TESTING</h3>

<!-- TROFF INPUT: .PP -->
<p>After running successfully with options
<b>-S</b>  and
<b>-D FILE</b>  the following should be true (report no error). 
<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .nf -->
<!--  -->
<pre class="display">               swverify &ndash;checksig .   # Deprecated form
                   -or-
               swverify -d @.     # POSIX syntax
     <!-- TROFF INPUT: .PP -->
     <!-- TROFF INPUT: .nf -->
     <!--  -->
     <pre class="display">          <!-- TROFF INPUT: .fi -->
     </pre>
     <!--  -->
     <!-- TROFF INPUT: .PP -->
     <!-- TROFF INPUT: .fi -->
</pre>
<!--  -->
<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .PP -->
<p>Similarly,
<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .nf -->
<!--  -->
<pre class="display">               swign -u "your GPG Name" @- | swverify &ndash;checksig -
                   -or-
               swign -u "your GPG Name" @- | swverify -d @-
     <!-- TROFF INPUT: .fi -->
</pre>
<!--  -->
<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .PP -->
<p>If a checkdigest script is included then you should unpack the package at a
new location and run  swverify -d @. in the new location.  The
<b>checkdigest</b> script is a vendor extension control file
that is part of the GPG signed ./catalog directory.  As an implementation
extension behavior the <b>swverify</b> program will execute
this script after verification of the signature.  The script may take any action at
this point, but the intention is that it be used to verify the contents
of the package directory using GNU tools such as md5sum, sha1sum,
and tar. 
<!-- TROFF INPUT: .PP -->
If a <b>checkdigest</b> script is not included, then the package
user will have to manually execute the commands that would have been
executed by the script using the file meta-data in an authenticated INFO file. 
When verifying the unpacked directory form of
a package,  the <b>swverify</b> program will return an error
if the <b>checkdigest</b> script is not present, though, it is not
required for verification of the tar archive file itself using
<b>swverify</b>. 
<!-- TROFF INPUT: .PP -->
Swign can be used to sign any directory using the file ownerships
of the source files.  The following commands act as a test
of swpackage's ability to generate an archive identical to GNU tar. 
(Note: the script checkdigest.sh is found in ./bin of the source distribution.) 
<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .nf -->
<!--  -->
<pre class="display">            swign -D $HOME/checkdigest.sh -u "Test User" -o "" -g "" -S;
            swverify -d @.
     <!-- TROFF INPUT: .fi -->
</pre>
<!--  -->
<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .SH "PSF ATTRIBUTE REPLACEMENT" -->
<!-- DEBUG: print_menu("TESTING") -->
<!-- MAN2TEXI: EON -->
<div class="node">
<p><hr>
<a name="PSF-ATTRIBUTE-REPLACEMENT"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#SAMPLE-SOURCE-PACKAGE-PSF">SAMPLE SOURCE PACKAGE PSF</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#TESTING">TESTING</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h3 class="section">1.8 PSF ATTRIBUTE REPLACEMENT</h3>

<!-- TROFF INPUT: .PP -->
<p>A PSF that is provided using the '-s' option will be scanned
for a special character sequence '%<tt>_</tt><tt>_</tt>NAME'  where NAME is
either 'tag' or 'revision'.  'tag' is replaced with the
package name portion of the currrent directory.  'revision' is
replaced with the version portion. 
<!-- TROFF INPUT: .SH "SAMPLE SOURCE PACKAGE PSF" -->
<!-- DEBUG: print_menu("PSF ATTRIBUTE REPLACEMENT") -->
<!-- MAN2TEXI: EON -->
<div class="node">
<p><hr>
<a name="SAMPLE-SOURCE-PACKAGE-PSF"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#ENVIRONMENT">ENVIRONMENT</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#PSF-ATTRIBUTE-REPLACEMENT">PSF ATTRIBUTE REPLACEMENT</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h3 class="section">1.9 SAMPLE SOURCE PACKAGE PSF</h3>

<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .nf -->
<!--  -->
<pre class="display">     <!-- TROFF INPUT: .br -->
     <!-- .br -->
     # PSF.in  &ndash; INPUT file to swign
     # This file contains the replacement macros %<tt>_</tt><tt>_</tt>tag and %<tt>_</tt><tt>_</tt>revision which
     # are only processed by swign.
     # The distribution object need not have any attributes.
     distribution
     # Attributes in the distribution are mostly ignored although
     # distributor control files that pertain to the distribution
     # as a whole are properly placed here.  Two examples of files
     # that are useful here are:
       AUTHORS &lt; AUTHORS   # This places the file in ./catalog/dfiles
       COPYING &lt; COPYING   # This places the file in ./catalog/dfiles
     # This places the checkdigest script in ./catalog/dfiles/checkdigest
     # For a description of the checkdigest script see the info document for
     # 'swbis' or the swverify manual page.
     # The checkdigest script is a verification hook for swverify used when
     # verifying the unpacked tarball (i.e. the package path name
     # prefix directory).
       checkdigest  &lt; bin/checkdigest.sh
     # The vendor object provides attributes to describe
     # the distributor.  At this time, how these attributes
     # are used is not addressed.
     # The Vendor object is optional
     vendor
        the<tt>_</tt>term<tt>_</tt>vendor<tt>_</tt>is<tt>_</tt>misleading True  # One of: True, False
        tag shortName    # Other vendor tags could be the short name of your
                              # organization name, or  your initials, etc.
        title Your Name
        qualifier author
        description "Maintainer of somepackage"
     # Most packages do not need a bundle.  At this point in swbis'
     # development 'bundles' are mostly ignored.  Bundles are meta
     # packages, it is an object that contains other bundles and
     # products whether included in this distribution tarball or not.
     # The Bundle object is optional
     bundle
        tag somepackage
     # The product object contains the attributes of common
     # interest such as the description, version and name.
     product
        description "somepackage description
     can be mult-line"
        tag %<tt>_</tt><tt>_</tt>tag                       # This is the package name
        revision %<tt>_</tt><tt>_</tt>revision             # This is the package version
        vendor<tt>_</tt>tag shortName             # Match vendor.tag above
        title "somepackage - software"
        control<tt>_</tt>directory ""             # Empty string, Important
     # The fileset object contains the files.  The tag, revision,
     # and description attributes are mostly ignored.
     # At this time swbis supports only one (1) fileset.
     fileset
         tag sources
         control<tt>_</tt>directory ""   # Empty string, Important
         title somepackage source code
         description "The source distribution of somepackage"
     # file<tt>_</tt>permissions:
     # Here is an important policy.  This will cause 'swpackage'
     # to create the tar achive with all files owned by uid and
     # gid zero (0), the user name 'root' will not be included
     # in the uname and gname tar header fields.  This is similar
     # to the effect of GNU tar options &ndash;numeric &ndash;owner=root
     # &ndash;group=root .
     # To use the name and ids of the source files delete the line
     # or reset the file<tt>_</tt>permissions adding after or changing to:
     #    file<tt>_</tt>permissions -u 000
     #
     # NOTE:  Using "file<tt>_</tt>permissions -o 0 -g 0"  is preferred
     # because it will allow the end user to more easily verify
     # the directory (unpacked) form of the package using standard
     # non-swbis tools.
     #   file<tt>_</tt>permissions -u 000  # To use ownerships of source files
         file<tt>_</tt>permissions -o 0 -g 0
     # The following two (2) lines mean include every file in the current
     # directory.
         directory .
         file *
     # You want to exclude the files in ./catalog because it
     # should not be part of the paylaod section.  This is
     # mandatory.
        exclude catalog
     # You may also want other excludes
        exclude CVS
        exclude */CVS
        # exclude .svn
        # exclude */.svn
     # End of PSF
     <!-- TROFF INPUT: .fi -->
</pre>
<!--  -->
<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .SH "ENVIRONMENT" -->
<!-- DEBUG: print_menu("SAMPLE SOURCE PACKAGE PSF") -->
<!-- MAN2TEXI: EON -->
<div class="node">
<p><hr>
<a name="ENVIRONMENT"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#RETURN-VALUE">RETURN VALUE</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#SAMPLE-SOURCE-PACKAGE-PSF">SAMPLE SOURCE PACKAGE PSF</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h3 class="section">1.10 ENVIRONMENT</h3>

<!-- TROFF INPUT: .PP -->
<p><b>SWPACKAGEPASSFD</b>
<!-- TROFF INPUT: .RS -->
<!--  -->
<blockquote>
Sets the swpackage <i>&ndash;passphrase-fd</i> option.  Set the option arg
to a integer value of the file descriptor, or to "env" to read the passphrase from
the environment variable SWPACKAGEPASSPHRASE, or to "agent" to cause gpg to use
gpg-agent, or "tty" to read from the terminal. 
<!-- TROFF INPUT: .RE -->
</blockquote>
<!--  -->
<!-- TROFF INPUT: .PP -->
<b>SWPACKAGEPASSPHRASE</b>
<!-- TROFF INPUT: .RS -->
<!--  -->
<blockquote>
Use the value as the passphrase if swpackage's <i>&ndash;passphrase-fd</i> is
set to "env"
<!-- TROFF INPUT: .RE -->
</blockquote>
<!--  -->
<!-- TROFF INPUT: .PP -->
<b>GNUPGHOME</b>
<!-- TROFF INPUT: .RS -->
<!--  -->
<blockquote>
Sets the &ndash;gpg-home option of swpackage. 
<!-- TROFF INPUT: .RE -->
</blockquote>
<!--  -->
<!-- TROFF INPUT: .PP -->
<b>GNUPGNAME</b>
<!-- TROFF INPUT: .RS -->
<!--  -->
<blockquote>
Sets the &ndash;gpg-name option of swpackage, which is turn set the &ndash;local-user option of gpg. 
<!-- TROFF INPUT: .RE -->
</blockquote>
<!--  -->
<!-- TROFF INPUT: .SH "RETURN VALUE" -->
<!-- DEBUG: print_menu("ENVIRONMENT") -->
<!-- MAN2TEXI: EON -->
<div class="node">
<p><hr>
<a name="RETURN-VALUE"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#FILES">FILES</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#ENVIRONMENT">ENVIRONMENT</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h3 class="section">1.11 RETURN VALUE</h3>

<!-- TROFF INPUT: .PP -->
<p>0 on success, non-zero on failure. 
<!-- TROFF INPUT: .SH "FILES" -->
<!-- DEBUG: print_menu("RETURN VALUE") -->
<!-- MAN2TEXI: EON -->
<div class="node">
<p><hr>
<a name="FILES"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#SEE-ALSO">SEE ALSO</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#RETURN-VALUE">RETURN VALUE</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h3 class="section">1.12 FILES</h3>

<!-- TROFF INPUT: .br -->
<!-- .br -->
<p>\&lt;<i>path</i>\&gt;/<b>catalog</b>/
<!-- TROFF INPUT: .SH "SEE ALSO" -->
<!-- DEBUG: print_menu("FILES") -->
<!-- MAN2TEXI: EON -->
<div class="node">
<p><hr>
<a name="SEE-ALSO"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#IDENTIFICATION">IDENTIFICATION</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#FILES">FILES</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h3 class="section">1.13 SEE ALSO</h3>

<!-- TROFF INPUT: .PP -->
<p>info swbis
<!-- TROFF INPUT: .PP -->
swpackage(8), gpg
<!-- TROFF INPUT: .SH "IDENTIFICATION" -->
<!-- DEBUG: print_menu("SEE ALSO") -->
<!-- MAN2TEXI: EON -->
<div class="node">
<p><hr>
<a name="IDENTIFICATION"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#BUGS">BUGS</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#SEE-ALSO">SEE ALSO</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h3 class="section">1.14 IDENTIFICATION</h3>

<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .nf -->
<!--  -->
<pre class="display">      swign(1): The source directory signing utility of the swbis project.
      Author: J. Lowe jhlowe@acm.org
      Version: 1.6
      Last Updated: 2008-01
      Copying: GNU Free Documentation License
     <!-- TROFF INPUT: .fi -->
</pre>
<!--  -->
<!-- TROFF INPUT: .PP -->
<!-- TROFF INPUT: .SH "BUGS" -->
<!-- DEBUG: print_menu("IDENTIFICATION") -->
<!-- MAN2TEXI: EON -->
<div class="node">
<p><hr>
<a name="BUGS"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#IDENTIFICATION">IDENTIFICATION</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h3 class="section">1.15 BUGS</h3>

<!-- TROFF INPUT: .PP -->
<p>Symbolic links in a package are problematic for verifying the unpacked form of a
package since the modification time is not preserved.  They have no affect on
verification of the tar archive file using 'swverify'. 
<!-- TROFF INPUT: .PP -->
If a directory is signed using the '-S' option and has a file path greater than
99 chars in length then it will be unverifiable if the 'ustar0' format and
GNU tar 1.13.25 was used. 
<!-- TROFF INPUT: .PP -->
Verification of the directory form of a distribution (i.e. the installed tarball
path name prefix) such as running 'swverify -d @.' after running 'swign -S'
will fail if the order of directory entries is not compatible with
traditional Unix file system directory entry ordering.  This incompatibility may be present in
the Ext3, reiserFS, and DarwinOS et.al file systems. 
<!-- TROFF INPUT: .PP -->
The file ownership policy of the PSF, the checkdigest script (if any) and the command line
options must agree. 
The default file ownership policies of this program are suited to packaged products
where file user and group ownerships are not a critical feature. 
<!-- created by instant / docbook-to-man, Tue 07 Sep 2010, 20:25 -->

</body></html>


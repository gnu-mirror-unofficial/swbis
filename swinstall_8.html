<HTML>
<HEAD>
<TITLE>swinstall(8)</TITLE>
<STYLE>
<!--
i {color:#000080}
-->
</STYLE>
</HEAD>
<BODY BGCOLOR="#f0f0f0">
<H1>swinstall(8)</H1>
<h3>Contents</h3><ul>
<li><a href="#NAME">NAME</a>
<li><a href="#SYNOPSIS">SYNOPSIS</a>
<li><a href="#DESCRIPTION">DESCRIPTION</a>
<li><a href="#OPTIONS">OPTIONS</a>
<li><a href="#INSTALLATION">INSTALLATION</a>
<ul><li><a href="#Analysis Phase"><font size=-1>Analysis Phase</font></a>
<li><a href="#Execution Phase"><font size=-1>Execution Phase</font></a>
</ul><li><a href="#INSTALLED SOFTWARE CATALOG">INSTALLED SOFTWARE CATALOG</a>
<ul><li><a href="#CATALOG FILE LAYOUT"><font size=-1>CATALOG FILE LAYOUT</font></a>
<li><a href="#CATALOG LOCATION"><font size=-1>CATALOG LOCATION</font></a>
<li><a href="#PACKAGE CATALOG RELATIVE ROOT"><font size=-1>PACKAGE CATALOG RELATIVE ROOT</font></a>
<li><a href="#CATALOG SEQUENCE NUMBER"><font size=-1>CATALOG SEQUENCE NUMBER</font></a>
<li><a href="#CATALOG CONTENTS"><font size=-1>CATALOG CONTENTS</font></a>
<li><a href="#The export directory"><font size=-1>The export directory</font></a>
<li><a href="#INSTALLED -- The state metadata file"><font size=-1>INSTALLED -- The state metadata file</font></a>
<li><a href="#EXAMPLE CATALOG ENTRY"><font size=-1>EXAMPLE CATALOG ENTRY</font></a>
</ul><li><a href="#IMPLEMENTATION EXTENSIONS">IMPLEMENTATION EXTENSIONS</a>
<ul><li><a href="#RPM Translation"><font size=-1>RPM Translation</font></a>
<li><a href="#Testing with RPM"><font size=-1>Testing with RPM</font></a>
</ul><li><a href="#EXTENDED OPTIONS">EXTENDED OPTIONS</a>
<ul><li><a href="#POSIX"><font size=-1>POSIX</font></a>
<li><a href="#Swbis Implementation"><font size=-1>Swbis Implementation</font></a>
</ul><li><a href="#RETURN VALUE">RETURN VALUE</a>
<li><a href="#NOTES">NOTES</a>
<li><a href="#REQUISITE UTILITIES">REQUISITE UTILITIES</a>
<li><a href="#FILES">FILES</a>
<li><a href="#APPLICABLE STANDARDS">APPLICABLE STANDARDS</a>
<li><a href="#SEE ALSO">SEE ALSO</a>
<li><a href="#IDENTIFICATION">IDENTIFICATION</a>
<li><a href="#BUGS">BUGS</a>
</ul><pre>
</pre><h3><a name="NAME"><b>NAME</b></a></h3><pre>       swinstall -- Install POSIX and RPM packages.
</pre><h3><a name="SYNOPSIS"><b>SYNOPSIS</b></a></h3><pre>       <b>swinstall</b> [-p] [-r] [-s <i>source</i><b>_</b><i>file</i>] [-f <i>file</i>] \
       [-t <i>targetfile</i>] [-x <i>option=value</i>]  [-X <i>options</i><b>_</b><i>file</i>] [-W <i>option</i>] \
       [software_selections] [@target [target1...]]

       <b>swinstall</b> -s -    # Minimum unambiguous invocation.

</pre><h3><a name="DESCRIPTION"><b>DESCRIPTION</b></a></h3><pre>       <b>swinstall</b> installs a POSIX distribution from a source archive to a
       target directory.  A POSIX distribution is a package, typically a
       compressed tarball with metadata files in the prescribed file layout.
       Neither swinstall nor any component of swbis is required on the target
       host, however, the target host must look like a Unix system at the
       shell and command-line utility level and have a POSIX shell.  Remote
       network connections are made by ssh.  Ssh is the default but rsh can be
       selected by a command line option.

       By default and with no external influences (i.e. swdefaults file)
       swinstall will read an archive on stdin and install all products and
       filesets of package in &quot;/&quot; directory on the target host.  An alternate
       root may be specified using the target syntax.  The distribution source
       directory (swbis default: stdin) is selectable via the defaults file,
       therefore it should be specified in uncontrolled environments.

       <b>swinstall</b> operates on  cpio or tar archives.  swinstall supports cpio
       archives by first translating to tar format, therefore, to reduce the
       data transformations performed by swinstall, distributors encouraged to
       deliver products in tar format.

       <b>swinstall</b> will create an entry in an installed software catalog.  This
       is a directory usually located at /var/lib/swbis/catalog.  Using this
       information checks for upgrade, downdate, dependencies, and
       reinstallation are made.
</pre><h3><a name="OPTIONS"><b>OPTIONS</b></a></h3><pre>       <b>-f FILE</b>

              Reads software_selections from FILE. (Not implemented).

       <b>-p</b>

              Preview the operation.  Depending on the verbose level
              information is written to stdout.  The target is not modified
              although a remote connection is established.


       <b>-r</b>

              This option has no affect.


       <b>-s SOURCE</b>

              Specify the source file SOURCE, &quot;-&quot; is standard input.  The
              syntax is the same as for a target.  SOURCE may be an archive
              file or stdin.

       <b>-t targetfile</b>

              Specify a file containing a list of targets (one per line).

       <b>-x option=value</b>

              Specify the extended option overriding the defaults file value.

       <b>-X FILE</b>

              Specify the extended options filename, FILE,  overriding the
              default filenames.  This option may be given more then once. If
              the resulting specified value is an empty string then reading of
              any options file is disabled.

       <b>-v</b>

              Given one time it is identical to -x verbose=2.  This option can
              be given multiple times with increasing effect.  (Implementation
              extension option).
              -v  is level 2, -vv is level 3,... etc.
                  level 0: silent on stdout and stderr.
                  level 1: fatal and warning messages to stderr.
              -v  level 2: level 1 plus a progress bar.
              -vv level 3: level 2 plus script stderr.
              -vvv level 4: level 3 plus events.
              -vvvv level 5: level 4 plus events.
              -vvvvv level 6: level 5 plus set shell -vx option.
              -vvvvvv level 7 and higher: level 6 plus debugging messages.

       <b>--version, -V</b>

              Show version (Implementation extension)

       <b>--help</b>

              Show help (Implementation extension)

       <b>-W option[,option,...]</b>

              Specify the implementation extension option.
              Syntax: -W option[=option_argument[,option...]
              Options may be separated by a comma.  The implementation
              extension options may also be given individually using the
              '--long-option[=option_arg]' syntax.

       <b>-W preview-tar-file=FILE</b>

              This is a testing/development option.  Writes the fileset
              archive to FILE.  This is the same data stream that would have
              been loaded on the target.  This option should only be used with
              the '-p' option.  The output sent to FILE is a tar archive but
              without trailer blocks.

       <b>-W remote-shell=NAME</b>


              Defaults File Option: <b>swbis_remote_shell_client</b>

              This is the remote connection client program on the management
              (originating host).  The path NAME may be an absolute path (not
              located in $PATH).  The basename of NAME is used for
              intermediate hops.  Supported shells are &quot;ssh&quot; and &quot;rsh&quot;.  The
              default is &quot;ssh&quot;.

       <b>-W quiet-progress</b>

              Defaults File Option: <b>swbis_quiet_progress_bar</b> Disable progress
              bar, which is active for verbose levels 2 and higher (i.e. -v).

       <b>-W show-options-files</b>
              Show the complete list of options files and if they are found.

       <b>-W show-options</b>
              Show the options after reading the files and parsing the command
              line options.

       <b>-W pax-command={tar|pax|star|gtar}</b>
              Set the portable archive command for all operations.  The
              default is &quot;pax&quot;.

       <b>-W pax-read-command={tar|pax|star|gtar}</b>
              Set the read command for local and remote hosts.

       <b>-W remote-pax-read-command={tar|pax|star|gtar}</b>
              Defaults File Option: <b>swbis_remote_pax_read_command</b>
              Set the read command for remote hosts.  This is the command that
              runs on the target (e.g. pax -r, tar xpf -).  The default is
              &quot;pax&quot;.

       <b>-W local-pax-read-command={tar|pax|star|gtar}</b>
              Defaults File Option: <b>swbis_local_pax_read_command</b>
              Set the read command for local hosts.  This is the command that
              runs on the target (e.g. pax -r, tar xpf -).  The default is
              &quot;pax&quot;.

       <b>-W pax-write-command={tar|pax|star|gtar|swbistar}</b>
              Set the write command for local and remote hosts.  This is the
              command that runs on the target (e.g. pax -w, tar cf -).

       <b>-W remote-pax-write-command={tar|pax|star|gtar|swbistar}</b>
              Defaults File Option: <b>swbis_remote_pax_write_command</b>
              Set the write command for remote hosts.

       <b>-W local-pax-write-command={tar|pax|star|gtar|swbistar}</b>
              Defaults File Option: <b>swbis_local_pax_write_command</b>
              Set the portable archive write command for local host
              operations.  This is the command that runs on the source (e.g.
              pax -w, tar cf -).  The default is &quot;pax&quot;.

       <b>-W remote-pax-write-command={tar|pax|star|gtar|swbistar}</b>
              Defaults File Option: <b>swbis_remote_pax_write_command</b>
              Set the portable archive write command for remote host
              operations.  This is the command that runs on the source (e.g.
              pax -w, tar cf -).  The default is &quot;pax&quot;.

       <b>-W no-defaults</b>
              Do not read any defaults files.

       <b>-W no-remote-kill</b>
              Defaults File Option: <b>swbis_no_remote_kill</b>
              Disables the use of a second remote connection to tear down the
              first in the event of SIGINT or SIGTERM or SIGPIPE.  Only has
              effect if the number of ssh hops is greater than 1.  A single
              host remote connection (ssh hop = 1) never uses a second remote
              connection.

       <b>-W no-getconf</b>
              Defaults File Option: <b>swbis_no_getconf</b>
              Makes the remote command be '/bin/sh -s' instead of the default
              'PATH=`getconf PATH` sh -s'.

       <b>-W shell-command=NAME</b>
              Defaults File Option: <b>swbis_shell_command</b>
              This is the interactive shell on the target host.  NAME may be
              one of &quot;detect&quot; &quot;bash&quot;, &quot;sh&quot;, &quot;ksh&quot;  or &quot;posix&quot; and specifies
              the remote command run by the remote shell.  &quot;posix&quot; is
              'PATH=`getconf PATH` sh -s', &quot;bash&quot; is &quot;/bin/bash -s&quot;, &quot;sh&quot; is
              &quot;/bin/sh -s&quot;, and &quot;ksh&quot; is &quot;ksh -s&quot;.  The default is &quot;detect&quot;.

       <b>-W use-getconf</b>
              Opposite of --no-getconf.

       <b>-W allow-rpm</b>
              Defaults File Option: <b>swbis_allow_rpm</b>
              Enable automatic detection, translation to POSIX format, and
              installation of RPMs.

       <b>-W pump-delay1=NANOSECONDS</b>
              Adds a NANOSECONDS delay (999999999 nanoseconds ~ 1 second)
              every ADJSIZE bytes in the file data byte pump.  A delay of
              10111000 nanoseconds (~1/100th second) is added for 2-hop or
              greater target (i.e more than 1 remote host in the target spec).
              This is a work around for a bug in OpenSSH [or Linux kernel]
              that is seen for multi-hop installs where the intermediate host
              is a Linux kernel.  If 2-hop install fails, try it again, you
              may get lucky, or, increase this delay, or, use ssh protocol
              version 1 by using ''--ssh-options=1'', or try a 2-hop install
              where the middle host is BSD.  To disable delay for multi-hop
              targets specify zero.  For more information about this bug see
              the README file from the source distribution.

       <b>-W burst-adjust=ADJSIZE</b>
              ADJSIZE is the pumped data size, in bytes, between the
              NANOSECONDS delays.  This is a work around for a bug in OpenSSH
              or the Linux kernel that is seen for multi-hop installs where
              the intermediate host is a Linux kernel.  The default is 72000
              for 2-hops or greater, and zero for single hop and localhost
              installs.

       <b>-W ssh-options=OPTIONS</b>
              ssh client program options.  For example -W ssh-options=1 sets
              the '-1' ssh client option which specifies protocol version 1.

       <b>-W source-script-name=NAME</b>
              Write the script that is written into the remote shell's stdin
              to NAME.  This is useful for debugging.

       <b>-W target-script-name=NAME</b>
              Write the script that is written into the remote shell's stdin
              to NAME.  This is useful for debugging.

       <b>software_selections</b>

              Refers to the software objects (products, filesets) on which to
              be operated. This is not implemented, however, specification of
              a <b>location</b> and <b>qualifier</b> are supported.  <b>location</b> allow
              specification of a alternate relative root path within the
              target path, and <b>qualifier</b> allows specification of a user-
              selectable modifier.  For example:

              swinstall q=exp @ 192.168.1.1  # Tag the package as experimental
              swinstall l=/unionfs/somepackage-1.0 @ 192.168.1.1  # Allows multiple
                                            # packages with same tag to exist in the
                                            # same target path, where the location
                                            # disambiguates.



       <b>target</b>

              Refers to the software_collection where the software selections
              are to be applied.  Allows specification of host and pathname
              where the software collection is to be located.  A target that
              contains only one part is assumed to be a hostname.  To force
              interpretation as a path, use an absolute path or prefix with
              ':'.  The default target path for 'swinstall' is always '/'.


       Source and Target Specification and Logic

            Synopsis:
                 Posix:
                      host[:path]
                      host
                      host:
                      /path  # Absolute path

                 Swbis Extension:
                      [user@]host[:path]
                      [user@]host_port[:path]
                      :path

                 Swbis Multi-hop Target Extension:
                      # ':' is the target delimiter
                   # '_' delimits a port number in the host field

                      [user@]host[@@[user@]host[@@...]][:file]
                      [user@]host_port[@@[user@]host[@@...]][:file]

                      # Using ':', a trailing colon is used to
                      # disambiguate between a host and file.
                   # For Example,
                      :file
                      host:
                      host
                      host:file
                      host:host:
                      host_port:host_port:
                      host:host:file
                      user@host:user@host:
                      user@host:user@host:host:
                      user@host:user@host:file

            A more formal description:

            target : HOST_CHARACTER_STRING ':' PATHNAME_CHARACTER_STRING
                   | HOST_CHARACTER_STRING ':'
                   | HOST_CHARACTER_STRING
                   | PATHNAME_CHARACTER_STRING
                   | ':' PATHNAME_CHARACTER_STRING   # Impl extension
                   ;

              PATHNAME_CHARACTER_STRING must be an absolute path unless
                              a HOST_CHARACTER_STRING is given.  Allowing
                              a relative path is a feature of the swbis
                              implementation.

                       NOTE: A '.' as a target is an implementation
                             extension and means extract in current
                             directory.

                       NOTE: A '-' indicating stdout/stdin is an
                             implementation extension.

                       NOTE: A ':' in the first character indicates a filename.
                             This is an implementation extension.

              HOST_CHARACTER_STRING is an IP or hostname.

           Examples:
              Copy the  distribution /var/tmp/foo.tar.gz at 192.168.1.10
                     swcopy -s /var/tmp/foo.tar.gz @192.168.1.10:/root


       Implementation Extension Syntax (multi ssh-hop) :
           Syntax:
           %start   wtarget    # the Implementation Extension Target
                               # Note: a trailing ':' forces interpretation
                               # as a host, not a file.
           wtarget   : wtarget DELIM sshtarget
                     | sshtarget
                     | sshtarget DELIM
                     ;
           sshtarget : user '@' target # Note: only the last target
                     | target          # may have a PATHNAME, and only a host
                     ;                 * may have a user
           target   : HOST_CHARACTER_STRING
                    | PATHNAME_CHARACTER_STRING
                    ;
           user     : PORTABLE_CHARACTER_STRING  # The user name

           DELIM    : ':'   # The multi-hop delimiter.
                    ;



</pre><h3><a name="INSTALLATION"><b>INSTALLATION</b></a></h3><pre>       Installation consists of an analysis phase and an execution phase.

   <a name="Analysis Phase"><b>Analysis Phase</b></a>
       The installed software catalog is queried and checks are made to detect
       reinstallation, downdating (installing an older version).  Dependency
       tests are made at this point.  If these checks pass or are overridden
       by options, then the installed software catalog entry is created
       (moving the old entry).  The <b>checkinstall</b> script is exectuted.  This
       script should be non-interactive, idempotent, and read-only from the
       system's perspective.  This script may exit with status of 0,1,2, or 3.
       If the exit status is 3 (or 1) installation is rejected and the
       installed catalog is restored.

   <a name="Execution Phase"><b>Execution Phase</b></a>
       The <b>preinstall</b> script is executed, the fileset files are loaded by the
       system tar utility and <b>postinstall</b> is executed.
</pre><h3><a name="INSTALLED SOFTWARE CATALOG"><b>INSTALLED SOFTWARE CATALOG</b></a></h3><pre>       The form or format of an installed software catalog is not specified by
       the ISO/IEC spec although it does specify an interface to it (e.g.
       swlist utility) and operations on it.

       This implementation creates a de-facto installed software catalog
       rooted at the file system path specified by the value of the
       installed_software_catalog extended option.  The catalog is a file
       system hierarchy containing regular files and directories.

       The catalog is typically located relative to the target path.  As of
       swbis version 1.5, the catalog location may be specified using the file
       URL syntax to indicate an absolute path.  Any other form, such as an
       unadorned absolute UNIX path will be treated as a path relative to the
       target path.

       For Example:
       Below are example values of the <i>installed</i><b>_</b><i>software</i><b>_</b><i>catalog</i> extended
       option found in the <b>swdefaults</b> file usually located in
       $HOME/.swbis/swdefaults


          var/lib/swbis/catalog   # Default, relative to target path

          /var/lib/swbis/catalog  # Same, leading slash not respected

          file://localhost/var/lib/swbis/catalog  # Really absolute

          file:///var/lib/swbis/catalog           # Note triple leading slash



   <a name="CATALOG FILE LAYOUT"><b>CATALOG FILE LAYOUT</b></a>
        &lt;<i>path</i>&gt;/
        &lt;<i>path</i>&gt;/&lt;<i>ISC</i>&gt;/
        &lt;<i>path</i>&gt;/&lt;<i>ISC</i>&gt;/&lt;<i>bundle</i>&gt;/
        &lt;<i>path</i>&gt;/&lt;<i>ISC</i>&gt;/&lt;<i>bundle</i>&gt;/&lt;<i>product</i>&gt;/
        &lt;<i>path</i>&gt;/&lt;<i>ISC</i>&gt;/&lt;<i>bundle</i>&gt;/&lt;<i>product</i>&gt;/&lt;<i>pr</i>&gt;/
        &lt;<i>path</i>&gt;/&lt;<i>ISC</i>&gt;/&lt;<i>bundle</i>&gt;/&lt;<i>product</i>&gt;/&lt;<i>pr</i>&gt;/&lt;<i>seqence</i><b>_</b><i>number</i>&gt;/
        &lt;<i>path</i>&gt;/&lt;<i>ISC</i>&gt;/&lt;<i>bundle</i>&gt;/&lt;<i>product</i>&gt;/&lt;<i>pr</i>&gt;/&lt;<i>sequence</i><b>_</b><i>number</i>&gt;/<b>export</b>/
        &lt;<i>path</i>&gt;/&lt;<i>ISC</i>&gt;/&lt;<i>bundle</i>&gt;/&lt;<i>product</i>&gt;/&lt;<i>pr</i>&gt;/&lt;<i>sequence</i><b>_</b><i>number</i>&gt;/<b>export</b>/<b>catalog.tar</b>
        &lt;<i>path</i>&gt;/&lt;<i>ISC</i>&gt;/&lt;<i>bundle</i>&gt;/&lt;<i>product</i>&gt;/&lt;<i>pr</i>&gt;/&lt;<i>sequence</i><b>_</b><i>number</i>&gt;/<b>export</b>/<b>catalog.tar.sig</b>
        &lt;<i>path</i>&gt;/&lt;<i>ISC</i>&gt;/&lt;<i>bundle</i>&gt;/&lt;<i>product</i>&gt;/&lt;<i>pr</i>&gt;/&lt;<i>sequence</i><b>_</b><i>number</i>&gt;/<b>export</b>/<b>catalog.tar.sig</b>&lt;<i>N</i>&gt;
        &lt;<i>path</i>&gt;/&lt;<i>ISC</i>&gt;/&lt;<i>bundle</i>&gt;/&lt;<i>product</i>&gt;/&lt;<i>pr</i>&gt;/&lt;<i>sequence</i><b>_</b><i>number</i>&gt;/<b>INSTALLED</b>
        &lt;<i>path</i>&gt;/&lt;<i>ISC</i>&gt;/&lt;<i>bundle</i>&gt;/&lt;<i>product</i>&gt;/&lt;<i>pr</i>&gt;/&lt;<i>sequence</i><b>_</b><i>number</i>&gt;/<b>control.sh</b>
        &lt;<i>path</i>&gt;/&lt;<i>ISC</i>&gt;/&lt;<i>bundle</i>&gt;/&lt;<i>product</i>&gt;/&lt;<i>pr</i>&gt;/&lt;<i>sequence</i><b>_</b><i>number</i>&gt;/<b>session_options</b>
        &lt;<i>path</i>&gt;/&lt;<i>ISC</i>&gt;/&lt;<i>bundle</i>&gt;/&lt;<i>product</i>&gt;/&lt;<i>pr</i>&gt;/&lt;<i>sequence</i><b>_</b><i>number</i>&gt;/<b>vendor_tag</b>
        &lt;<i>path</i>&gt;/&lt;<i>ISC</i>&gt;/&lt;<i>bundle</i>&gt;/&lt;<i>product</i>&gt;/&lt;<i>pr</i>&gt;/&lt;<i>sequence</i><b>_</b><i>number</i>&gt;/<b>location</b>
        &lt;<i>path</i>&gt;/&lt;<i>ISC</i>&gt;/&lt;<i>bundle</i>&gt;/&lt;<i>product</i>&gt;/&lt;<i>pr</i>&gt;/&lt;<i>sequence</i><b>_</b><i>number</i>&gt;/<b>qualifier</b>


       &lt;<i>path</i>&gt; is the target path.  &lt;<i>ISC</i>&gt; is the value of the
       installed_software_cataglog extended option.  &lt;<i>bundle</i>&gt; and &lt;<i>product</i>&gt;
       are bundle and product tags.  If there is no bundle in the distribution
       the product tag is used.  &lt;<i>pr</i>&gt; is the product revision.  Other items
       are explained below.

   <a name="CATALOG LOCATION"><b>CATALOG LOCATION</b></a>
       /&lt;<i>path</i>&gt;/
       /&lt;<i>path</i>&gt;/&lt;<i>installed</i><b>_</b><i>software</i><b>_</b><i>catalog</i>&gt;/
       /&lt;<i>path</i>&gt;/&lt;<i>installed</i><b>_</b><i>software</i><b>_</b><i>catalog</i>&gt;/...


       <b>* Root or Alternate Root</b>
       /&lt;<i>path</i>&gt;/

       &lt;<i>path</i>&gt;/ is the target path specified in the target syntax. By default
       &quot;/&quot;.

       <b>* Catalog Relative Root Directory</b>
       /&lt;<i>path</i>&gt;/
       /&lt;<i>path</i>&gt;/&lt;<i>installed</i><b>_</b><i>software</i><b>_</b><i>catalog</i>&gt;/

       &lt;<i>installed</i><b>_</b><i>software</i><b>_</b><i>catalog</i>&gt;/ is the value of the extended option by
       the same name.  By default &quot;var/lib/swbis/catalog&quot;.

   <a name="PACKAGE CATALOG RELATIVE ROOT"><b>PACKAGE CATALOG RELATIVE ROOT</b></a>
       /&lt;<i>{bundle|prod}.tag</i>&gt;/&lt;<i>prod.tag</i>&gt;/&lt;<i>prod.revision</i>&gt;/...

        In other words, if 'product' and 'bundle' refers to tags, and
       product_revision is the value of the product.revision attribute then
       the path segment is:

        /bundle/product/product_revision


   <a name="CATALOG SEQUENCE NUMBER"><b>CATALOG SEQUENCE NUMBER</b></a>
        /&lt;<i>sequence</i><b>_</b><i>number</i>&gt;/
        /&lt;<i>sequence</i><b>_</b><i>number</i>&gt;/...


       <i>sequence</i><b>_</b><i>number</i> is a decimal integer starting with '0'.  It is chosen
       by swinstall to be unique at the time of installation.

   <a name="CATALOG CONTENTS"><b>CATALOG CONTENTS</b></a>
       &lt;<i>sequence</i><b>_</b><i>number</i>&gt;/
        &lt;<i>sequence</i><b>_</b><i>number</i>&gt;/<b>export</b>/
        &lt;<i>sequence</i><b>_</b><i>number</i>&gt;/<b>export</b>/<b>catalog.tar</b>
        &lt;<i>sequence</i><b>_</b><i>number</i>&gt;/<b>export</b>/<b>catalog.tar.sig</b>
        &lt;<i>sequence</i><b>_</b><i>number</i>&gt;/<b>INSTALLED</b>
        &lt;<i>sequence</i><b>_</b><i>number</i>&gt;/<b>control.sh</b>
        &lt;<i>sequence</i><b>_</b><i>number</i>&gt;/<b>session_options</b>
        &lt;<i>sequence</i><b>_</b><i>number</i>&gt;/<b>vendor_tag</b>
        &lt;<i>sequence</i><b>_</b><i>number</i>&gt;/<b>location</b>
        &lt;<i>sequence</i><b>_</b><i>number</i>&gt;/<b>qualifier</b>


       <a name="The export directory"><b>The export directory</b></a>
        <b>export</b>/
        <b>export</b>/...
        <b>export</b>/<b>catalog.tar</b>
        <b>export</b>/<b>catalog.tar.sig</b>
        <b>export</b>/<b>catalog.tar.sig2</b>
                      ...
        <b>export</b>/<b>catalog.tar.sig</b><i>N</i>


       The <b>export</b>/ is a file system directory and its name is constant for all
       packages and is unique to the swbis implementation.  The
       <b>export</b>/<b>catalog.tar</b> file is the signed file from the POSIX distribution.
       The <b>export</b>/<b>catalog.tar.sig</b> file is the signature file from the
       distribution.  If there is more than one signature, then it is the last
       one.  <b>export</b>/<b>catalog.tar.sig2</b> is the next to last signature, and
       <b>export</b>/<b>catalog.tar.sig</b><i>N</i> is the first one, where <i>N</i> is the total number
       of signatures.

       <a name="INSTALLED -- The state metadata file"><b>INSTALLED -- The state metadata file</b></a>
        &lt;<i>sequence</i><b>_</b><i>number</i>&gt;/<b>INSTALLED</b>


       The INSTALLED file is similar to an INDEX file in its grammar and
       syntax.  Unlike an INDEX file, it may contain control_file definitions.
       The INSTALLED file stores the control script return codes and fileset
       installation state.  It is updated several times during the operation
       of 'swinstall'.  It can be parsed using  libexec/swbisparse and the
       '--installed' option.

       <b>control.sh -- The master control script</b>
        &lt;<i>sequence</i><b>_</b><i>number</i>&gt;/<b>control.sh</b>
         SYNOPSIS: <b>control.sh</b> <i>tag</i><b>_</b><i>spec script</i><b>_</b><i>tag</i>


       The control.sh file is a POSIX shell script that is automatically
       generated by swinstall.  It provides a common interface for control
       script execution.  Its primary purpose is to set up the script's
       execution environment and map script tags to the control script
       pathnames.  It assumes that 'export/catalog.tar' is unpacked in
       export/.

       <b>session_options -- The extended options</b>
        &lt;<i>sequence</i><b>_</b><i>number</i>&gt;/<b>session_options</b>


       This file contains the extended options in a form that may be executed
       by the shell '.' (dot) command.  It is automatically generated by
       swinstall.  The value of the SW_SESSION_OPTIONS environment variable is
       the absolute pathname of the this file.

   <a name="EXAMPLE CATALOG ENTRY"><b>EXAMPLE CATALOG ENTRY</b></a>
       Below is an example entry of the catalog created by swbis version
       0.405.  In this example, the target path is '/mnt/test', the
       <i>installed</i><b>_</b><i>software</i><b>_</b><i>catalog</i> is '/var/lib/swbis/catalog/', the bundle tag
       is 'foobare', the product tag is 'foobare-doc', and the product
       revision attribute is '0.902'.

       /mnt/test/var/lib/swbis/catalog/foobare/foobare-doc/0.902/0/export
       /mnt/test/var/lib/swbis/catalog/foobare/foobare-doc/0.902/0/export/catalog.tar
       /mnt/test/var/lib/swbis/catalog/foobare/foobare-doc/0.902/0/export/catalog.tar.sig
       /mnt/test/var/lib/swbis/catalog/foobare/foobare-doc/0.902/0/INSTALLED
       /mnt/test/var/lib/swbis/catalog/foobare/foobare-doc/0.902/0/control.sh
       /mnt/test/var/lib/swbis/catalog/foobare/foobare-doc/0.902/0/vendor_tag
       /mnt/test/var/lib/swbis/catalog/foobare/foobare-doc/0.902/0/location
       /mnt/test/var/lib/swbis/catalog/foobare/foobare-doc/0.902/0/qualifier
       /mnt/test/var/lib/swbis/catalog/foobare/foobare-doc/0.902/0/session_options

        A deleted old catalog entry begin with '_', for example

       /mnt/test/var/lib/swbis/catalog/foobare/foobare-doc/0.902/_0/...


       Although swinstall does not depend on the file name as this
       accommodates installing from standard input, a typical name for this
       package would be:

              foobare-doc-0.902-sl04.tar.gz

        where 'sl04' is the vendor tag.
</pre><h3><a name="IMPLEMENTATION EXTENSIONS"><b>IMPLEMENTATION EXTENSIONS</b></a></h3><pre>   <b>Software Specification Targets</b>
       A dash '-' is supported and means stdout or stdin.  Operations with
       stdout and stdin on a remote host is not supported.

       A decimal '.' is supported and means the current directory.  This is
       supported for remote and non-remote targets.  If the source is standard
       input, the distribution will be unpacked (e.g. pax -r) in the directory
       '.'.  If the source is a regular file then a regular file in '.' will
       be created with the same name.


   <a name="RPM Translation"><b>RPM Translation</b></a>
       RPM (RedHat Package Manager) format packages are installed by first
       translating to an equivalent ISO/IEEE file layout in POSIX tar format
       and then installing as a POSIX package.  This translation and detection
       is transparent to the user if the ''--allow-rpm'' option is set in the
       command line args or the swbis_allow_rpm is set to &quot;true&quot; by the
       defaults files, otherwise an error occurs.

       Since translation is done on the local (management) host, RPM is not
       required on the remote (target) host.

       The translation is (internally) equivalent to :

          cat your-0.0-1.bin.rpm |
          /usr/lib/swbis/lxpsf --psf-form2 -H ustar |
          swpackage -W source=- -s @PSF | swinstall -s - @/


   <a name="Testing with RPM"><b>Testing with RPM</b></a>
        To test the swbis components, a completely independent means to
       install and verify a package is needed.  RPM provides this means and
       can be used in the following way:

          rpm -i --nodeps --force your-0.0-1.i386.rpm  # Install
          rpm --verify --nodeps your-0.0-1             # Show that all is well
          rpm -e --nodeps your-0.0-1                   # Remove it.
          rpm -i --nodeps --justdb your-0.0-1.i386.rpm # Install just the database.
          rpm --verify --nodeps your-0.0-1             # Shows the files are missing.
          swinstall --allow-rpm -s - &lt; your-0.0-1.i386.rpm
          rpm --verify --nodeps your-0.0-1             # Show that all is well again

</pre><h3><a name="EXTENDED OPTIONS"><b>EXTENDED OPTIONS</b></a></h3><pre>       Extended options can be specified on the command line using the -x
       option or from the defaults file, swdefaults.  Shown below is an actual
       portion of a defaults file which show default values.

   <a name="POSIX"><b>POSIX</b></a>
       These options are set in the /usr/lib/swbis/swdefaults or the
       ~/.swdefaults


         allow_downdate              = false      # Not Implemented
         allow_incompatible          = false      # Not Implemented
         ask                         = false      # Not Implemented
         autoreboot                  = false      # Not Implemented
         autorecover                 = false      # Not Implemented
         autoselect_dependencies     = false      # Not Implemented
         defer_configure             = false      # Not Implemented
         distribution_source_directory   = -        # Stdin
         enforce_dependencies        = false      # Not Implemented
         enforce_locatable           = false      # Not Implemented
         enforce_scripts             = false      # Not Implemented
         enforce_dsa                 = false      # Not Implemented
         installed_software_catalog  = var/lib/swbis/catalog
         logfile             = /var/lib/sw/swinstall.log #Not Implemented
         loglevel                    = 0          # Not Implemented
         reinstall                   = false      # Not Implemented
         select_local      = false      # Not Implemented
         verbose           = 1


   <a name="Swbis Implementation"><b>Swbis Implementation</b></a>
       These options are set in the /usr/lib/swbis/swbisdefaults or the
       ${HOME}/.swbis/swbisdefaults file.


         swinstall.swbis_no_getconf = true # true or false
         swinstall.swbis_shell_command = detect # {detect|sh|bash|ksh|posix}
         swinstall.swbis_no_remote_kill = false # true or false
         swinstall.swbis_no_audit = false # true or false
         swinstall.swbis_quiet_progress_bar = false # true or false
         swinstall.swbis_local_pax_write_command=pax #{pax|tar|star|gtar}
         swinstall.swbis_remote_pax_write_command=pax #{pax|tar|star|gtar}
         swinstall.swbis_local_pax_read_command=pax #{pax|tar|gtar|star}
         swinstall.swbis_remote_pax_read_command=pax #{pax|tar|gtar|star}
         swinstall.swbis_enforce_sig=false # true or false
         swinstall.swbis_enforce_file_md5=false # true or false
         swinstall.swbis_allow_rpm=false # true or false
         swinstall.swbis_remote_shell_client=ssh
         swinstall.swbis_install_volatile=true
         swinstall.swbis_volatile_newname=     #empty string, e.g. &quot;.rpmnew&quot;

</pre><h3><a name="RETURN VALUE"><b>RETURN VALUE</b></a></h3><pre>       0 if all targets succeeded, 1 if all targets failed, 2 if some targets
       failed and some succeeded.
</pre><h3><a name="NOTES"><b>NOTES</b></a></h3><pre>        Multiple ssh-hops is an implementation extension.
</pre><h3><a name="REQUISITE UTILITIES"><b>REQUISITE UTILITIES</b></a></h3><pre>       The swbis distributed utilities require <b>bash</b>, public domain <b>ksh</b>, or
       ksh93 (version 2009-05-05), or Sun's /usr/xpg4/bin/sh to be present on
       the target host.  If the <b>swbis_shell_command</b> extended option is set to
       'detect' you don't have to know which one is present, otherwise you may
       specify one explicitly.

       A POSIX <b>awk</b> is required, and with the ability to specify several
       thousand bytes of program text as a command argument.  GNU awk  works,
       as does the ATT Awk book awk, and the awk on BSD systems.  See the
       INSTALL file for further details regarding a small issue with the
       OpenSolaris (c.2006) awk.
</pre><h3><a name="FILES"><b>FILES</b></a></h3><pre>        /var/lib/swbis/catalog # Location of installed catalog
        /usr/lib/swbis/swdefaults
        /usr/lib/swbis/swbisdefaults
        $HOME/.swbis/swdefaults
        $HOME/.swbis/swbisdefaults

</pre><h3><a name="APPLICABLE STANDARDS"><b>APPLICABLE STANDARDS</b></a></h3><pre>       ISO/IEC 15068-2:1999, Open Group CAE C701
</pre><h3><a name="SEE ALSO"><b>SEE ALSO</b></a></h3><pre>       info swbis

       <a href=swcopy_8.html>swcopy(8)</a>, <a href=sw_5.html>sw(5)</a>, <a href=swbisparse_1.html>swbisparse(1)</a>, <a href=swign_1.html>swign(1)</a>, <a href=swverify_8.html>swverify(8)</a>
</pre><h3><a name="IDENTIFICATION"><b>IDENTIFICATION</b></a></h3><pre>        <a href=swinstall_8.html>swinstall(8)</a>: The installation utility of the swbis project.
        Author: Jim Lowe   Email: jhlowe at acm.org
        Version: 1.6
        Last Updated: 2010-02-05
        Copying: GNU Free Documentation License
</pre><h3><a name="BUGS"><b>BUGS</b></a></h3><pre>       swinstall is subject to breakage if a user's account on an intermediate
       (or terminal) host in a target spec is not configured to use a Bourne
       compatible shell. (This breakage may be eliminated by use of the --no-
       getconf option as explained above.)

       A multiple ssh hop source spec  (more than 1 remote host involved in
       the source transfer) upon a SIGINT may result in sshd and ssh processes
       being left on on the intermediate host(s), this despite, swinstall's
       action of sending a SIGTERM to the remote script's parent process.

       swinstall does not currently implement Software Selections, not fileset
       dependencies, and much more.  Only packages with one product and one
       fileset are supported.



                                                                  <a href=swinstall_8.html>swinstall(8)</a>
</pre><hr></body></html>
